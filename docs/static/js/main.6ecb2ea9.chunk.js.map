{"version":3,"sources":["redux/actions.tsx","redux/mode.tsx","redux/reducers.tsx","redux/region.tsx","svg.tsx","chart-control.tsx","vx.tsx","AddCountry.tsx","x-axis.tsx","TwitterButton.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["EReduxActionTypes","toggleScale","type","TOGGLE_SCALE","changeZoom","by","CHANGE_ZOOM","data","changeMode","to","CHANGE_MODE","addRegion","name","ADD_REGION","removeRegion","index","REMOVE_REGION","shiftRegion","SHIFT_REGION","EMode","ModeToAllCountryData","TotalCases","TotalCasesPP","DailyCases","DailyCasesPP","TotalDeaths","TotalDeathsPP","DailyDeaths","DailyDeathsPP","all","toString","mode","EScale","fromString","str","parts","split","length","country","offset","_offset","parseInt","defaultState","scale","Linear","zoom","regions","state","persistedState","Log","setRegions","push","splice","query","s","z","m","r","map","region","window","history","replaceState","qs","stringify","loadState","parse","location","search","Object","values","includes","Array","isArray","ChevronLeft","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","React","PureComponent","ChevronRight","ChevronsLeft","ChevronsRight","PlusSign","x1","y1","x2","y2","MinusSign","TrashSign","d","ChartControl","props","bind","zoomIn","zoomOut","key","this","Dropdown","id","onSelect","Toggle","variant","Menu","Item","eventKey","className","aria-label","disabled","onClick","e","target","HTMLElement","dataset","data-key","renderModePicker","renderScaleToggle","connect","dispatch","bindActionCreators","logTicks","Set","y","value","VX","withTooltip","margin","top","right","bottom","left","showTooltip","hideTooltip","tooltipData","tooltipTop","tooltipLeft","useState","width","height","dims","setDims","xMax","yMax","vxData","allCountryData","calcCases","cases","endsWith","population","Population","isNaN","forEach","idx","n","countryData","filter","countryRow","dayToCases","_","fromPairs","year","from","keys","date","point","color","tooltipShifter","sort","a","b","middle","Math","floor","i","handleTooltip","event","xValue","localPoint","x","round","xScale","invert","currentData","matchingPoint","find","yScale","scaleLinear","range","domain","DAYS_TO_SHOW","maxY","max","nice","scaleLog","common","curve","curveMonotoneX","axisFormat","valueOf","has","format","bounds","onResize","measureRef","ref","AxisLeft","hideZero","numTicks","tickFormat","tickStroke","tickLabelProps","textAnchor","fontSize","dx","dy","tickComponent","formattedValue","tickProps","Grid","opacity","numTicksRows","numTicksColumns","LinePath","Bar","onTouchStart","onTouchMove","onMouseEnter","onMouseMove","onMouseLeave","Line","style","pointerEvents","strokeDasharray","backgroundColor","boxShadow","Tooltip","dayjs","add","Number","isInteger","toFixed","searchIndex","algoliasearch","initIndex","AddRegion","onSuccess","q","setQ","suggestions","setSuggestions","getSuggestions","hits","console","log","_suggestions","hit","slice","useEffect","onChange","maxWidth","autoFocus","placeholder","suggestion","extend","dayOfYear","XAxis","enteringRegion","shiftRegionBack1","shiftRegionBack5","shiftRegionForward1","shiftRegionForward5","showNewRegionInput","dismissNewRegionInput","setState","day","modulo","zero","transform","dayString","delta","cls","abs","buttonAttrs","renderOffset","renderDays","renderRegion","renderAddRegion","TwitterButton","href","setUrl","display","data-show-count","App","Boolean","hostname","match","ReactDOM","render","store","createStore","action","actions","SET_REGIONS","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"uMAEYA,E,kFAkBL,SAASC,IACd,MAAO,CAAEC,KAAMF,EAAkBG,cAQ5B,SAASC,EAAWC,GACzB,MAAO,CAAEH,KAAMF,EAAkBM,YAAaC,KAAMF,GAQ/C,SAASG,EAAWC,GACzB,MAAO,CAAEP,KAAMF,EAAkBU,YAAaH,KAAME,GAiB/C,SAASE,EAAUC,GACxB,MAAO,CAAEV,KAAMF,EAAkBa,WAAYN,KAAMK,GAQ9C,SAASE,EAAaC,GAC3B,MAAO,CAAEb,KAAMF,EAAkBgB,cAAeT,KAAMQ,GAQjD,SAASE,EAAYF,EAAeV,GACzC,MAAO,CAAEH,KAAMF,EAAkBkB,aAAcX,KAAM,CAAEQ,QAAOV,Q,SAzEpDL,K,4BAAAA,E,0BAAAA,E,0BAAAA,E,0BAAAA,E,wBAAAA,E,8BAAAA,E,6BAAAA,M,WCGAmB,E,kDAAAA,K,gBAAAA,E,oBAAAA,E,gBAAAA,E,oBAAAA,E,iBAAAA,E,qBAAAA,E,iBAAAA,E,sBAAAA,M,KAYL,IAAMC,GAA8C,mBACxDD,EAAME,WAAaA,GADqC,cAExDF,EAAMG,aAAeD,GAFmC,cAGxDF,EAAMI,WAAaA,GAHqC,cAIxDJ,EAAMK,aAAeD,GAJmC,cAKxDJ,EAAMM,YAAcA,GALoC,cAMxDN,EAAMO,cAAgBD,GANkC,cAOxDN,EAAMQ,YAAcA,GAPoC,cAQxDR,EAAMS,cAAgBD,GARkC,GAW9CE,EAAe,CAC1BV,EAAME,WACNF,EAAMG,aACNH,EAAMI,WACNJ,EAAMK,aACNL,EAAMM,YACNN,EAAMO,cACNP,EAAMQ,YACNR,EAAMS,eAGD,SAASE,EAASC,GACvB,OAAQA,GACN,KAAKZ,EAAME,WACT,MAAO,cACT,KAAKF,EAAMG,aACT,MAAO,2BACT,KAAKH,EAAMI,WACT,MAAO,cACT,KAAKJ,EAAMK,aACT,MAAO,2BACT,KAAKL,EAAMM,YACT,MAAO,eACT,KAAKN,EAAMO,cACT,MAAO,4BACT,KAAKP,EAAMQ,YACT,MAAO,eACT,KAAKR,EAAMS,cACT,MAAO,6B,IChDDI,E,QCCL,SAASC,EAAWC,GACzB,IAEMC,EAAQD,EAAIE,MAAM,KACxB,GAAqB,IAAjBD,EAAME,OACR,MAJW,CAAEC,QAAS,gBAAiBC,OAAQ,GADF,kBAQpBJ,EARoB,GAQxCG,EARwC,KAQ/BE,EAR+B,KAS/C,MAAO,CACLF,UACAC,OAAQE,SAASD,IAAY,I,SDZrBR,K,gBAAAA,E,WAAAA,M,KAYZ,IAEMU,EAAyB,CAC7BC,MAAOX,EAAOY,OACdC,KAAM,EACNd,KAAMA,EAAWV,WACjByB,QAAS,CACP,CAAER,QAAS,gBAAiBC,QAAQ,IACpC,CAAED,QAAS,QAASC,QAAQ,IAC5B,CAAED,QAAS,cAAeC,QAAQ,MAyBtC,SAAStC,EAAY8C,GACnB,OAAOC,EAAe,eACjBD,EADgB,CAEnBJ,MAAOI,EAAMJ,QAAUX,EAAOY,OAASZ,EAAOiB,IAAMjB,EAAOY,UAI/D,SAASxC,EAAW2C,EAAiBxC,GACnC,IAAIsC,EAAOE,EAAMF,KAAOtC,EAMxB,OALIsC,EAAO,EACTA,EAAO,EACEA,EAAO,IAChBA,EAAO,GAEFG,EAAe,eAAKD,EAAN,CAAaF,UAGpC,SAASrC,EAAWuC,EAAiBtC,GACnC,OAAOuC,EAAe,eAAKD,EAAN,CAAahB,KAAMtB,KAG1C,SAASyC,EAAWH,EAAiBD,GACnC,OAAOE,EAAe,eAAKD,EAAN,CAAaD,aAGpC,SAASnC,EAAUoC,EAAiBnC,GAClC,IAAIkC,EAAO,YAAOC,EAAMD,SAExB,OADAA,EAAQK,KAAK,CAAEb,QAAS1B,EAAM2B,QAAS,KAChCS,EAAe,eAAKD,EAAN,CAAaD,aAGpC,SAAShC,EAAaiC,EAAiBhC,GACrC,IAAI+B,EAAO,YAAOC,EAAMD,SAExB,OADAA,EAAQM,OAAOrC,EAAO,GACfiC,EAAe,eAAKD,EAAN,CAAaD,aAGpC,SAAS7B,EAAY8B,EAAiBhC,EAAeV,GACnD,IAAIyC,EAAO,YAAOC,EAAMD,SAExB,OADAA,EAAQ/B,GAAR,eAAsB+B,EAAQ/B,GAA9B,CAAsCwB,OAAQO,EAAQ/B,GAAOwB,OAASlC,IAC/D2C,EAAe,eAAKD,EAAN,CAAaD,aAGpC,SAASE,EAAeD,GACtB,IAAIM,EAAQ,CACVC,EAAGP,EAAMJ,MACTY,EAAGR,EAAMF,KACTW,EAAGT,EAAMhB,KACT0B,EAAGV,EAAMD,QAAQY,KAAI,SAAAD,GAAC,MChGlB,GAAN,QADuBE,EDiGqBF,GChG3BnB,QAAjB,YAA4BqB,EAAOpB,QAD9B,IAAkBoB,MDoGvB,OADAC,OAAOC,QAAQC,aAAa,KAAM,GAAI,IAAMC,IAAGC,UAAUX,IAClDN,EAGT,SAASkB,IACP,IAAMZ,EAAQU,IAAGG,MAAMN,OAAOO,SAASC,QACnCrB,EAAK,eAAQL,GAcjB,OAZI2B,OAAOC,OAAOtC,GAAQuC,SAASlB,EAAMC,KACvCP,EAAMJ,MAAQU,EAAMC,GAElBe,OAAOC,OAAOvC,GAAYwC,SAASlB,EAAMG,KAC3CT,EAAMhB,KAAOsB,EAAMG,GAEjBgB,MAAMC,QAAQpB,EAAMI,GACtBV,EAAMD,QAAUO,EAAMI,EAAEC,KAAI,SAAAD,GAAC,OAAIE,EAAkBF,MAC1CJ,EAAMI,IACfV,EAAMD,QAAU,CAACa,EAAkBN,EAAMI,KAGpCV,E,uDE1HI2B,EAAb,iLAEI,OACE,yBAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,8BAAUC,OAAO,yBALzB,GAAiCC,IAAMC,eAW1BC,EAAb,iLAEI,OACE,yBAAKT,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,8BAAUC,OAAO,wBALzB,GAAkCC,IAAMC,eAW3BE,EAAb,iLAEI,OACE,yBAAKV,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,8BAAUC,OAAO,oBACjB,8BAAUA,OAAO,0BANzB,GAAkCC,IAAMC,eAY3BG,EAAb,iLAEI,OACE,yBAAKX,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,8BAAUC,OAAO,qBACjB,8BAAUA,OAAO,wBANzB,GAAmCC,IAAMC,eAY5BI,GAAb,iLAEI,OACE,yBAAKZ,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,0BAAMQ,GAAG,KAAKC,GAAG,IAAIC,GAAG,KAAKC,GAAG,OAChC,0BAAMH,GAAG,IAAIC,GAAG,KAAKC,GAAG,KAAKC,GAAG,YANxC,GAA8BT,IAAMC,eAYvBS,GAAb,iLAEI,OACE,yBAAKjB,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,0BAAMQ,GAAG,IAAIC,GAAG,KAAKC,GAAG,KAAKC,GAAG,YALxC,GAA+BT,IAAMC,eAWxBU,GAAb,iLAEI,OACE,yBAAKlB,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IACrEC,cAAc,QAAQC,eAAe,SACrC,8BAAUC,OAAO,iBACjB,0BAAMa,EAAE,mFACR,0BAAMN,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OACjC,0BAAMH,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,YARzC,GAA+BT,IAAMC,eCxD/BY,I,kBACJ,WAAYC,GAA4B,IAAD,8BACrC,4CAAMA,KAEDxF,WAAa,EAAKA,WAAWyF,KAAhB,gBAClB,EAAKC,OAAS,EAAKA,OAAOD,KAAZ,gBACd,EAAKE,QAAU,EAAKA,QAAQF,KAAb,gBACf,EAAKhG,YAAc,EAAKA,YAAYgG,KAAjB,gBANkB,E,wEAS5BG,GACTC,KAAKL,MAAMxF,WAAW4F,K,yCAItB,OACE,kBAACE,EAAA,EAAD,CAAUC,GAAG,eAAeC,SAAUH,KAAK7F,YACzC,kBAAC8F,EAAA,EAASG,OAAV,CAAiBC,QAAQ,QAAQH,GAAG,iBACjCxE,EAAcsE,KAAKL,MAAMjE,OAE5B,kBAACuE,EAAA,EAASK,KAAV,KACG5E,EAAS2B,KAAI,SAAAF,GAAC,OACb,kBAAC8C,EAAA,EAASM,KAAV,CAAeR,IAAK5C,EAAGqD,SAAUrD,GAC9BzB,EAAcyB,W,gCASzB6C,KAAKL,MAAM5F,YAAY,K,+BAIvBiG,KAAKL,MAAM5F,WAAW,K,0CAItB,OACE,yBAAKmG,GAAG,eAAeO,UAAU,YAAYC,aAAW,QACtD,4BACE7G,KAAK,SACL4G,UAAU,uBACVE,SAA8B,IAApBX,KAAKL,MAAMnD,KACrBoE,QAASZ,KAAKF,SAEd,kBAAC,GAAD,OAEF,4BACEjG,KAAK,SACL4G,UAAU,uBACVE,SAA8B,IAApBX,KAAKL,MAAMnD,KACrBoE,QAASZ,KAAKH,QAEd,kBAAC,GAAD,U,kCAMIgB,GACNA,EAAEC,kBAAkBC,aAClBF,EAAEC,OAAOE,QAAT,MAA4BhB,KAAKL,MAAMrD,OACzC0D,KAAKL,MAAM/F,gB,0CAKiB,IAAD,OAE/B,OACE,yBAAKsG,GAAG,eAAeO,UAAU,YAAYC,aAAW,SACrD,CAAC/E,EAAOY,OAAQZ,EAAOiB,KAAKS,KAAI,SAAAJ,GAAC,OAChC,4BACE8C,IAAK9C,EACLgE,WAAUhE,EACVpD,KAAK,SACL4G,UARU,uBAQc,EAAKd,MAAMrD,QAAUW,EAAI,YAAc,IAC/D2D,QAAS,EAAKhH,aAEbqD,S,+BAQT,OACE,yBAAKiD,GAAG,gBAAgBO,UAAU,iBAC/BT,KAAKkB,mBACN,yBAAKT,UAAU,iBACZT,KAAKmB,0B,GA9FWtC,IAAMC,gBA8GlBsC,gBATS,SAAC1E,GAAD,MAAsB,CAC5CF,KAAME,EAAMF,KACZd,KAAMgB,EAAMhB,KACZY,MAAOI,EAAMJ,UAGY,SAAC+E,GAAD,OACzBC,YAAmB,CAAEnH,aAAYJ,aAAYH,eAAeyH,KAE/CD,CAA6C1B,I,qMCrGtD6B,I,MAAW,IAAIC,IAAI,CAAC,EAAG,GAAI,IAAK,IAAM,IAAO,OAe7CC,GAAI,SAAChC,GAAD,OAAqBA,EAAEiC,OA+B3BC,GAAKC,cACT,YAU8D,IAAD,IAT3DC,cAS2D,MATlD,CAAEC,IAAK,EAAGC,MAAO,EAAGC,OAAQ,EAAGC,KAAM,GASa,EAR3DC,EAQ2D,EAR3DA,YACAC,EAO2D,EAP3DA,YACAC,EAM2D,EAN3DA,YAM2D,KAL3DC,WAK2D,EAJ3DC,oBAI2D,MAJ7C,EAI6C,EAH3D5G,EAG2D,EAH3DA,KACAY,EAE2D,EAF3DA,MACAG,EAC2D,EAD3DA,QAC2D,EACnCoC,IAAM0D,SAAuB,CACnDT,IAAK,EACLG,KAAM,EACND,OAAQ,EACRD,MAAO,EACPS,MAAO,IACPC,OAAQ,MAPiD,mBACpDC,EADoD,KAC9CC,EAD8C,KAUrDC,EAAOF,EAAKF,MAAQX,EAAOI,KAAOJ,EAAOE,MACzCc,EAAOH,EAAKD,OAASZ,EAAOC,IAAMD,EAAOG,OAEzCc,EAA0B,GAC1BC,EAAiBhI,EAAqBW,GAEtCsH,EAAY,SAACC,EAAevH,EAAaO,GAC7C,GAAIP,EAAKwH,SAAS,MAAO,CACvB,IAAMC,EAAaC,GAAWnH,GAC9B,OAAIoH,MAAMF,GACD,EAEDF,EAAQE,EAAa,IAE/B,OAAOF,GAGTxG,EAAQ6G,SAAQ,WAAsBC,GAAS,IArFpCC,EAqFQvH,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,OACpBuH,EAAcV,EAAeW,QACjC,SAAAC,GAAU,OAAIA,EAAW1H,UAAYA,KAGjC2H,EAAaC,KAAEC,UACnBD,KAAExG,IAAIoG,GAAa,gBAAGR,EAAH,EAAGA,MAAH,MAAqB,CAArB,EAAUc,KACrBf,EAAUC,EAAOvH,EAAMO,QAI3B2C,GAhGG4E,EA6CM,GA7CkBrF,MAAM6F,KAAK7F,MAAMqF,GAAGS,SAiGlD5G,KAAI,SAAAkG,GAAG,MAAK,CACXW,KAAMX,EACN7B,MAAOkC,EAAWL,EAAMrH,IAAW,MAEpCwH,QAAO,SAAAS,GAAK,OAAoB,OAAhBA,EAAMzC,OAAkC,IAAhByC,EAAMzC,SAEjDoB,EAAOhG,KAAK,CACVvC,KAAM0B,EACNmI,MAAM,sBAAD,OAAwBtB,EAAO9G,OAAS,EAAxC,KACLE,SACA0C,cA4EJ,IAxEA,IAAMyF,EAAiB,SAACnK,GACtB,GAAIA,EAAK8B,OAAS,EAChB,OAAO9B,EAGTA,EAAOA,EAAKoK,MAAK,SAACC,EAAGC,GAAJ,OAAWD,EAAE9C,EAAI+C,EAAE/C,EAAK,GAAK,KAC9C,IAAMgD,EAASC,KAAKC,MAAMzK,EAAK8B,OAAS,GAEpC9B,EAAKuK,GAAQhD,EAAIvH,EAAKuK,EAAS,GAAGhD,EAAI,KACxCvH,EAAKuK,GAAQhD,EAAIvH,EAAKuK,GAAQhD,EAAI,GAClCvH,EAAKuK,EAAS,GAAGhD,EAAIvH,EAAKuK,EAAS,GAAGhD,EAAI,IAG5C,IAAK,IAAImD,EAAIH,EAAS,EAAGG,GAAK,EAAGA,IAC3B1K,EAAK0K,EAAI,GAAGnD,EAAIvH,EAAK0K,GAAGnD,EAAI,KAC9BvH,EAAK0K,GAAGnD,EAAIvH,EAAK0K,EAAI,GAAGnD,EAAI,IAIhC,IAAK,IAAImD,EAAIH,EAAS,EAAGG,EAAI1K,EAAK8B,OAAQ4I,IACpC1K,EAAK0K,GAAGnD,EAAIvH,EAAK0K,EAAI,GAAGnD,EAAI,KAC9BvH,EAAK0K,GAAGnD,EAAIvH,EAAK0K,EAAI,GAAGnD,EAAI,IAIhC,OAAOvH,GAGH2K,EAAgB,SACpBC,GAMA,IALI,IAAD,EACGC,GAAS,UAAAC,aAAWF,UAAX,eAAmBG,IAAK,EACjCvK,EAAQgK,KAAKQ,MAAMC,EAAOC,OAAOL,IAEnC3C,EAAgC,GAJjC,WAKMwC,GACP,IAAMS,EAAcvC,EAAO8B,GACnBrK,EAAwB8K,EAAxB9K,KAAM6J,EAAkBiB,EAAlBjB,MAAOlI,EAAWmJ,EAAXnJ,OACfgI,EAAOxJ,EAEP4K,EAAgBD,EAAYzG,OAAO2G,MACvC,SAAApB,GAAK,OAAIA,EAAMD,OAASA,KAE1B,IAAKoB,EACH,iBAGF,IAAM5D,EAAQ4D,EAAc5D,MAE5BU,EAAYtF,KAAK,CACfvC,OACA6J,QACAlI,SACAgI,KAAMxJ,EACNgH,QACAD,EAAG+D,EAAO9D,MApBLkD,EAAI,EAAGA,EAAI9B,EAAO9G,OAAQ4I,IAAK,EAA/BA,GAwBT1C,EAAY,CACVE,YAAaiC,EAAejC,GAC5BE,YAAa6C,EAAOzK,GACpB2H,WAAY,KAIV8C,EAASM,aAAY,CACzBC,MAAO,CAAC,EAAGhD,EAAKF,OAChBmD,OAAQ,CAAC,EAAGC,MAGVC,EAAO,EACFjB,EAAI,EAAGA,EAAI9B,EAAO9G,OAAQ4I,IACjCiB,EAAOnB,KAAKoB,IAAIA,aAAIhD,EAAO8B,GAAGhG,OAAQ6C,KAAM,EAAGoE,GAEjD,IAAIL,EAASC,aAAY,CACvBC,MAAO,CAAChD,EAAKD,OAAQ,GACrBkD,OAAQ,CAAC,EAAGE,GACZE,MAAM,IAEJzJ,IAAUX,EAAOiB,MACnB4I,EAASQ,aAAS,CAChBN,MAAO,CAAChD,EAAKD,OAAQ,GACrBkD,OAAQ,CAAC,EAAGE,GACZE,MAAM,KAIV,IAAME,EAAS,CACbhB,EAAG,SAACxF,GAAD,OAAqB0F,EAzLpB,SAAC1F,GAAD,OAAqBA,EAAEyE,KAyLIe,CAAExF,KACjCgC,EAAG,SAAChC,GAAD,OAAqB+F,EAAO/D,GAAEhC,KACjCyG,MAAOC,MAOHC,EAAa9J,IAAUX,EAAOiB,IAJlB,SAAC4G,EAAoCoB,GACrD,IAAIlD,EAAqB,kBAAN8B,EAAiBA,EAAIA,EAAE6C,UAC1C,OAAO9E,GAAS+E,IAAI5E,GAAS6E,aAAO,MAAPA,CAAc/C,GAAK,IAEI+C,aAAO,OAS7D,OACE,kBAAC,KAAD,CACEC,QAAM,EACNC,SAAU,SAAArJ,GACRA,EAAEoJ,QAAU7D,EAAQvF,EAAEoJ,WAGvB,gBAAGE,EAAH,EAAGA,WAAH,OACC,yBAAKC,IAAKD,GACR,yBAAKlE,MAAOE,EAAKF,MAAOC,OAAQ,KAC9B,kBAACmE,GAAA,EAAD,CACE9E,IAAKD,EAAOC,IACZG,KAAM,EACN3F,MAAOkJ,EACPqB,UAAQ,EACRC,SAAU,EACVC,WAAYX,EACZY,WAAW,cACXxI,OAAO,cACPyI,eAAgB,iBAAO,CACrB1I,KAAM,cACN2I,WAAY,MACZC,SAAU,GACVC,GAAI,MACJC,GAAI,WAENC,cAAe,gBAAGC,EAAH,EAAGA,eAAmBC,EAAtB,0CACb,yBAAUA,EAAYD,MAG1B,kBAACE,GAAA,EAAD,CACE3F,IAAKD,EAAOC,IACZG,KAAMJ,EAAOI,KACbkD,OAAQA,EACRK,OAAQA,EACRhH,OAAO,cACPkJ,QAAS,GACTlF,MAAOI,EACPH,OAAQI,EACR8E,aAAc,EACdC,gBAAiB,KAElB9E,EAAOzF,KAAI,SAAAoC,GAAC,OACX,kBAACoI,GAAA,EAAD,eACE9H,IAAKN,EAAElF,KACPiE,OAAQiB,EAAE2E,MACV3F,YAAa,GACTwH,EAJN,CAKE/L,KAAMuF,EAAEb,aAGZ,kBAACkJ,GAAA,EAAD,CACE7C,EAAG,EACHxD,EAAG,EACHe,MAAOE,EAAKF,MACZC,OAAQ,IACRlE,KAAK,cACLwJ,aAAclD,EACdmD,YAAanD,EACboD,aAAcpD,EACdqD,YAAarD,EACbsD,aAAchG,IAEfC,GACC,2BACE,kBAACgG,GAAA,EAAD,CACEpE,KAAM,CAAEiB,EAAG3C,EAAab,EAAG,GAC3BrH,GAAI,CAAE6K,EAAG3C,EAAab,EAAG,KACzBjD,OAAO,cACPC,YAAa,EACb4J,MAAO,CAAEC,cAAe,QACxBC,gBAAgB,UAKvBnG,GACC,6BACGA,EAAY/E,KAAI,SAAAoC,GACf,IAtFQiC,EAsFJ2G,EAAQ,CACVjE,MAAO3E,EAAE2E,MACToE,gBAAiB,cACjBC,UAAW,QAMb,OAJIhJ,EAAEyE,KAAO,KACXmE,EAAK,UAAgB,oBACrBA,EAAK,UAAgB,SAGrB,kBAACK,GAAA,EAAD,CACE3I,IAAKN,EAAElF,KACPuH,IAAKrC,EAAEgC,EAAI,GACXQ,KAAMK,EACN+F,MAAOA,GAEP,yBAAK5H,UAAU,gBACb,qCAAOhB,EAAElF,OACT,0CAAYoO,KAAM,cACfC,IAAInJ,EAAEyE,KAAOzE,EAAEvD,OAAQ,OACvBqK,OAAO,YAEZ,yBAAK9F,UAAU,iBAAf,WA5GIiB,EA6GejC,EAAEiC,MA5GjCmH,OAAOC,UAAUpH,GACZA,EAAMqH,UAERrH,EAAMqH,QAAQ,kBA8HZ3H,gBAPS,SAAC1E,GAAD,MAAsB,CAC5CD,QAASC,EAAMD,QACfD,KAAME,EAAMF,KACZF,MAAOI,EAAMJ,MACbZ,KAAMgB,EAAMhB,QAGC0F,CAAyBO,I,qEChWlCqH,I,OAJeC,KACnB,aACA,oCAE+BC,UAAU,UAmE9BC,GAAY/H,YAAQ,MAHN,SAACC,GAAD,OACzBC,YAAmB,CAAEhH,aAAa+G,KAEXD,EAjEC,SAAC,GAMpB,IALLgI,EAKI,EALJA,UACA9O,EAII,EAJJA,UAII,EACciI,mBAAS,IADvB,mBACG8G,EADH,KACMC,EADN,OAEkC/G,mBAAmB,IAFrD,mBAEGgH,EAFH,KAEgBC,EAFhB,KAIEC,EAAc,yCAAG,WAAOJ,GAAP,oBAAA9E,EAAA,sEACEyE,GAAYjL,OAAOsL,GADrB,gBACbK,EADa,EACbA,KACRC,QAAQC,IAAIF,GAENG,EAAeH,EAAKrM,KAAI,SAAAyM,GAAG,OAAIA,EAAIvP,QAAMwP,MAAM,EAAG,GAExDP,EAAeK,GANM,2CAAH,sDAapB,OAJAG,qBAAU,WACRP,EAAeJ,KACd,CAACA,IAGF,yBAAKnJ,GAAG,mBAAmBO,UAAU,cACnC,yBAAKA,UAAU,uBACb,2BACEiB,MAAO2H,EACPY,SAAU,SAAApJ,GAAC,OAAIyI,EAAKzI,EAAEC,OAAOY,QAC7BjB,UAAU,eACV4H,MAAO,CAAE6B,SAAU,KACnBrQ,KAAK,OACLsQ,WAAW,EACXC,YAAY,sBAGd,4BACE3J,UAAU,eACVG,QAAS,kBAAMwI,KACff,MAAO,CAAEjE,MAAO,SAEhB,kBAAC,GAAD,QAGJ,yBAAK3D,UAAU,gBACZ8I,EAAYlM,KAAI,SAAAgN,GAAU,OACzB,yBACEtK,IAAKsK,EACL5J,UAAW,eACXG,QAAS,WACPtG,EAAU+P,GACVjB,MAGDiB,W,OCrDb1B,KAAM2B,OAAOC,M,IAUPC,G,YACJ,WAAY7K,GAAqB,IAAD,8BAC9B,4CAAMA,KAEDjD,MAAQ,CACX+N,gBAAgB,EAChB/H,KAAM,CACJZ,IAAK,EACLG,KAAM,EACND,OAAQ,EACRD,MAAO,EACPS,MAAO,IACPC,OAAQ,MAGZ,EAAKnI,UAAY,EAAKA,UAAUsF,KAAf,gBACjB,EAAKnF,aAAe,EAAKA,aAAamF,KAAlB,gBACpB,EAAK8K,iBAAmB,EAAKA,iBAAiB9K,KAAtB,gBACxB,EAAK+K,iBAAmB,EAAKA,iBAAiB/K,KAAtB,gBACxB,EAAKgL,oBAAsB,EAAKA,oBAAoBhL,KAAzB,gBAC3B,EAAKiL,oBAAsB,EAAKA,oBAAoBjL,KAAzB,gBAC3B,EAAKkL,mBAAqB,EAAKA,mBAAmBlL,KAAxB,gBAC1B,EAAKmL,sBAAwB,EAAKA,sBAAsBnL,KAA3B,gBArBC,E,uEAwBtBiB,GACR8I,QAAQC,IAAI/I,K,mCAGDA,GACPA,EAAEC,kBAAkBC,aACtBf,KAAKL,MAAMlF,aAAa2B,SAASyE,EAAEC,OAAOE,QAAT,U,uCAIpBH,GACXA,EAAEC,kBAAkBC,aACtBf,KAAKL,MAAM/E,YAAYwB,SAASyE,EAAEC,OAAOE,QAAT,QAA8B,K,uCAIjDH,GACXA,EAAEC,kBAAkBC,aACtBf,KAAKL,MAAM/E,YAAYwB,SAASyE,EAAEC,OAAOE,QAAT,QAA8B,K,0CAI9CH,GACdA,EAAEC,kBAAkBC,aACtBf,KAAKL,MAAM/E,YAAYwB,SAASyE,EAAEC,OAAOE,QAAT,OAA6B,K,0CAI7CH,GACdA,EAAEC,kBAAkBC,aACtBf,KAAKL,MAAM/E,YAAYwB,SAASyE,EAAEC,OAAOE,QAAT,OAA6B,K,2CAK/DhB,KAAKgL,SAAS,CAAEP,gBAAgB,M,8CAIhCzK,KAAKgL,SAAS,CAAEP,gBAAgB,M,gCAGxBQ,GACR,IAAIC,EAAS,EAOb,OANIlL,KAAKtD,MAAMgG,KAAKF,MAAQ,IAC1B0I,EAAS,EACAlL,KAAKtD,MAAMgG,KAAKF,MAAQ,MACjC0I,EAAS,GAEED,EAAIV,YACHW,IAAW,EAAID,EAAI1E,OAAO,OAAS,S,iCAGxCrK,EAAgB0I,GAAyB,IAAD,OAC3CuG,EAAOxC,KAAM,cACnB,OACE,yBAAKlI,UAAU,uBACb,yBAAKA,UAAU,yBACf,yBACEA,UAAU,4BACV4H,MAAO,CACL+C,UAAU,cAAD,OAA0B,IAATlP,EAAgB,GAAjC,KACTkI,MAAM,sBAAD,OAAwBQ,EAAI,EAA5B,OAGN,YAAIzG,MAAM,IAAI8F,QAAQ5G,KAAI,SAAAoC,GAAC,OAC1B,yBAAKM,IAAKN,EAAGgB,UAAU,cACrB,yBAAKA,UAAU,oBACZ,EAAK4K,UAAUF,EAAKvC,IAAInJ,EAAG,iB,mCAS7BvD,GACX,GAAkC,IAA9B8D,KAAKL,MAAMlD,QAAQT,OACrB,OAAO,8BAGT,IACMsP,EAAQpP,EADD8D,KAAKL,MAAMlD,QAAQ,GAAGP,OAEnC,GAAc,IAAVoP,EACF,OAAO,8BAGT,IAAMC,EAAMD,EAAQ,EAAI,cAAe,eACvC,OACE,yBAAK7K,UAAW8K,EAAM,UAAtB,UACM7G,KAAK8G,IAAIF,GADf,aAC0BA,EAAQ,EAAI,QAAU,a,mCAKvClO,EAAmBwH,GAC9B,IAAM6G,EAAc,CAAEhL,UAAW,eAAgB,aAAcmE,GAC/D,OACE,yBAAKnE,UAAU,aAAaV,IAAK3C,EAAEnB,SACjC,yBAAKwE,UAAU,sCACb,4CAAYgL,EAAZ,CAAyB7K,QAASZ,KAAK2K,mBACrC,kBAAC,EAAD,OAEF,4CAAYc,EAAZ,CAAyB7K,QAASZ,KAAK0K,mBACrC,kBAAC,EAAD,QAGJ,yBAAKjK,UAAU,uBACb,yBAAKA,UAAU,6BACb,yBAAKA,UAAU,cAAc4H,MAAO,CAClCG,gBAAgB,sBAAD,OAAwB5D,EAAI,EAA5B,QAEjB,yBAAKnE,UAAU,eAAerD,EAAEnB,SAChC,4CAAYwP,EAAZ,CAAyB7K,QAASZ,KAAKvF,eACrC,kBAAC,GAAD,QAGHuF,KAAK0L,aAAatO,EAAElB,SAEtB8D,KAAK2L,WAAWvO,EAAElB,OAAQ0I,GAC3B,yBAAKnE,UAAU,uCACb,4CAAYgL,EAAZ,CAAyB7K,QAASZ,KAAK4K,sBACrC,kBAAC,EAAD,OAEF,4CAAYa,EAAZ,CAAyB7K,QAASZ,KAAK6K,sBACrC,kBAAC,EAAD,W,wCAQR,OACE,yBAAK3K,GAAG,aAAaO,UAAU,cAC7B,4BAAQA,UAAU,kBAAkBG,QAASZ,KAAK8K,oBAChD,kBAAC,GAAD,MACA,0D,+BAMe,IAAD,OACpB,OACE,kBAAC,KAAD,CACEtE,QAAM,EACNC,SAAU,SAAArJ,GAAOA,EAAEoJ,QAAU,EAAKwE,SAAS,CAACtI,KAAMtF,EAAEoJ,YAEnD,gBAAGE,EAAH,EAAGA,WAAH,OACC,yBAAKxG,GAAG,SAASyG,IAAKD,GACpB,6BACC,EAAK/G,MAAMlD,QAAQY,KAAI,SAACD,EAAGwH,GAAJ,OAAU,EAAKgH,aAAaxO,EAAGwH,MACtD,EAAKlI,MAAM+N,eACV,kBAACtB,GAAD,CAAWC,UAAW,kBAAM,EAAK2B,2BAEjC,EAAKc,0B,GAtLChN,IAAMC,eAsMXsC,gBAPS,SAAC1E,GAAD,MAAsB,CAC5CD,QAASC,EAAMD,YAGU,SAAC4E,GAAD,OACzBC,YAAmB,CAAEhH,YAAWG,eAAcG,eAAeyG,KAEhDD,CAA6CoJ,IC7N/CsB,I,OAAgB,WAAO,IAAD,EACXvJ,mBAAShF,OAAM,SAAawO,MADjB,mBACrBC,GADqB,WAOjC,OAJAhC,qBAAU,WACRgC,EAAOzO,OAAM,SAAawO,QACzB,CAACxO,OAAM,SAAawO,OAGrB,6BACE,uBACE1D,MAAO,CAAE4D,QAAS,QAClBF,KAAK,gDACLtL,UAAU,wBACVyL,kBAAgB,SAJlB,YC2CSC,OA7Cf,WACE,OACE,yBAAKjM,GAAG,eACN,yBAAKA,GAAG,YAAYO,UAAU,OAC5B,yBAAKA,UAAU,kBACb,wBAAIP,GAAG,cAAP,oCACA,wBAAIA,GAAG,iBAAP,8DAGA,yBAAKO,UAAU,WACb,yBAAKP,GAAG,oBACR,kBAAC,GAAD,SAIN,kBAAC,GAAD,MACA,yBAAKO,UAAU,SACb,yBAAKA,UAAU,cACb,kBAAC,GAAD,OAEF,kBAAC,GAAD,OAEF,gCACE,sCACU,uBAAGsL,KAAM,mCAAT,gBAA6D,IADvE,OAEM,uBAAGA,KAAM,oCAAT,iBAA+D,IAFrE,wBAGwB,IACtB,uBAAGA,KAAM,0CAAT,qBAJF,KAUA,iDACsB,IACpB,uBAAGA,KAAM,uCAAT,UAFF,mCAMA,mECpCYK,QACW,cAA7B7O,OAAOO,SAASuO,UAEe,UAA7B9O,OAAOO,SAASuO,UAEhB9O,OAAOO,SAASuO,SAASC,MACvB,2D,cCNNC,IAASC,OACP,kBAAC,IAAD,CAAUC,MAAOC,aVoBJ,WAA8D,IAArDhQ,EAAoD,uDAAlCkB,IAAa+O,EAAqB,uCAC1E,OAAQA,EAAO9S,MACb,KAAK+S,EAA0B9S,aAC7B,OAAOF,EAAY8C,GACrB,KAAKkQ,EAA0B3S,YAC7B,OAAOF,EAAW2C,EAAOiQ,EAAOzS,MAClC,KAAK0S,EAA0BvS,YAC7B,OAAOF,EAAWuC,EAAOiQ,EAAOzS,MAClC,KAAK0S,EAA0BC,YAC7B,OAAOhQ,EAAWH,EAAOiQ,EAAOzS,MAClC,KAAK0S,EAA0BpS,WAC7B,OAAOF,EAAUoC,EAAOiQ,EAAOzS,MACjC,KAAK0S,EAA0BjS,cAC7B,OAAOF,EAAaiC,EAAOiQ,EAAOzS,MACpC,KAAK0S,EAA0B/R,aAC7B,OAAOD,EAAY8B,EAAOiQ,EAAOzS,KAAKQ,MAAOiS,EAAOzS,KAAKF,IAC3D,QACE,OAAO0C,OUpCT,kBAAC,GAAD,OAEFoQ,SAASC,eAAe,SD2HpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACL5D,QAAQ4D,MAAMA,EAAMC,a","file":"static/js/main.6ecb2ea9.chunk.js","sourcesContent":["import { IRegion } from \"./region\";\n\nexport enum EReduxActionTypes {\n  TOGGLE_SCALE = \"toggle_scale\",\n  CHANGE_ZOOM = \"change_zoom\",\n  CHANGE_MODE = \"change_mode\",\n  SET_REGIONS = \"set_regions\",\n  ADD_REGION = \"add_region\",\n  REMOVE_REGION = \"remove_region\",\n  SHIFT_REGION = \"shift_region\"\n}\n\nexport interface IReduxBaseAction {\n  type: EReduxActionTypes;\n}\n\nexport interface IReduxToggleScaleAction extends IReduxBaseAction {\n  type: EReduxActionTypes.TOGGLE_SCALE;\n}\n\nexport function toggleScale(): IReduxToggleScaleAction {\n  return { type: EReduxActionTypes.TOGGLE_SCALE };\n}\n\nexport interface IReduxChangeZoomAction extends IReduxBaseAction {\n  type: EReduxActionTypes.CHANGE_ZOOM;\n  data: number;\n}\n\nexport function changeZoom(by: number): IReduxChangeZoomAction {\n  return { type: EReduxActionTypes.CHANGE_ZOOM, data: by };\n}\n\nexport interface IReduxChangeModeAction extends IReduxBaseAction {\n  type: EReduxActionTypes.CHANGE_MODE;\n  data: string;\n}\n\nexport function changeMode(to: string): IReduxChangeModeAction {\n  return { type: EReduxActionTypes.CHANGE_MODE, data: to };\n}\n\nexport interface IReduxSetRegionsAction extends IReduxBaseAction {\n  type: EReduxActionTypes.SET_REGIONS;\n  data: IRegion[];\n}\n\nexport function setRegions(regions: IRegion[]): IReduxSetRegionsAction {\n  return { type: EReduxActionTypes.SET_REGIONS, data: regions };\n}\n\nexport interface IReduxAddRegionAction extends IReduxBaseAction {\n  type: EReduxActionTypes.ADD_REGION;\n  data: string;\n}\n\nexport function addRegion(name: string): IReduxAddRegionAction {\n  return { type: EReduxActionTypes.ADD_REGION, data: name };\n}\n\nexport interface IReduxRemoveRegionAction extends IReduxBaseAction {\n  type: EReduxActionTypes.REMOVE_REGION;\n  data: number;\n}\n\nexport function removeRegion(index: number): IReduxRemoveRegionAction {\n  return { type: EReduxActionTypes.REMOVE_REGION, data: index };\n}\n\nexport interface IReduxShiftRegionAction extends IReduxBaseAction {\n  type: EReduxActionTypes.SHIFT_REGION;\n  data: { index: number, by: number };\n}\n\nexport function shiftRegion(index: number, by: number): IReduxShiftRegionAction {\n  return { type: EReduxActionTypes.SHIFT_REGION, data: { index, by } };\n}\n\nexport type ReduxAction =\n  | IReduxToggleScaleAction\n  | IReduxChangeModeAction\n  | IReduxChangeZoomAction\n  | IReduxSetRegionsAction\n  | IReduxAddRegionAction\n  | IReduxRemoveRegionAction\n  | IReduxShiftRegionAction;\n","import TotalDeaths from \"../data/total-deaths-covid-19-who.json\";\nimport DailyDeaths from \"../data/daily-deaths-covid-19-who.json\";\nimport TotalCases from \"../data/total-cases-covid-19-who.json\";\nimport DailyCases from \"../data/daily-cases-covid-19-who.json\";\n\nexport enum EMode {\n  TotalCases = \"tc\",\n  TotalCasesPP = \"tcpp\",\n  DailyCases = \"dc\",\n  DailyCasesPP = \"dcpp\",\n  TotalDeaths = \"td\",\n  TotalDeathsPP = \"tdpp\",\n  DailyDeaths = \"dd\",\n  DailyDeathsPP = \"ddpp\"\n}\n\ntype DataRow = { country: string; code: string; year: number; cases: number };\nexport const ModeToAllCountryData: Record<EMode, DataRow[]> = {\n  [EMode.TotalCases]: TotalCases,\n  [EMode.TotalCasesPP]: TotalCases,\n  [EMode.DailyCases]: DailyCases,\n  [EMode.DailyCasesPP]: DailyCases,\n  [EMode.TotalDeaths]: TotalDeaths,\n  [EMode.TotalDeathsPP]: TotalDeaths,\n  [EMode.DailyDeaths]: DailyDeaths,\n  [EMode.DailyDeathsPP]: DailyDeaths\n};\n\nexport const all: EMode[] = [\n  EMode.TotalCases,\n  EMode.TotalCasesPP,\n  EMode.DailyCases,\n  EMode.DailyCasesPP,\n  EMode.TotalDeaths,\n  EMode.TotalDeathsPP,\n  EMode.DailyDeaths,\n  EMode.DailyDeathsPP\n];\n\nexport function toString(mode: EMode): string {\n  switch (mode) {\n    case EMode.TotalCases:\n      return \"Total Cases\";\n    case EMode.TotalCasesPP:\n      return \"Total Cases per 1mm Pop.\"\n    case EMode.DailyCases:\n      return \"Daily Cases\";\n    case EMode.DailyCasesPP:\n      return \"Daily Cases per 1mm Pop.\"\n    case EMode.TotalDeaths:\n      return \"Total Deaths\";\n    case EMode.TotalDeathsPP:\n      return \"Total Deaths per 1mm Pop.\"\n    case EMode.DailyDeaths:\n      return \"Daily Deaths\";\n    case EMode.DailyDeathsPP:\n      return \"Daily Deaths per 1mm Pop.\"\n  }\n}\n","import qs from \"query-string\";\n\nimport * as actions from \"./actions\";\nimport { ReduxAction } from \"./actions\";\nimport * as mode from \"./mode\";\nimport * as region from \"./region\";\nimport { IRegion } from \"./region\";\n\nexport enum EScale {\n  Linear = \"linear\",\n  Log = \"log\"\n}\n\nexport interface AppState {\n  scale: EScale;\n  zoom: number;\n  mode: mode.EMode;\n  regions: region.IRegion[];\n}\n\nconst BASE_OFFSET = -2;\n\nconst defaultState: AppState = {\n  scale: EScale.Linear,\n  zoom: 3,\n  mode: mode.EMode.TotalCases,\n  regions: [\n    { country: \"United States\", offset: -39 + BASE_OFFSET },\n    { country: \"Italy\", offset: -28 + BASE_OFFSET },\n    { country: \"South Korea\", offset: -24 + BASE_OFFSET }\n  ]\n};\n\nexport default function(state: AppState = loadState(), action: ReduxAction) {\n  switch (action.type) {\n    case actions.EReduxActionTypes.TOGGLE_SCALE:\n      return toggleScale(state);\n    case actions.EReduxActionTypes.CHANGE_ZOOM:\n      return changeZoom(state, action.data);\n    case actions.EReduxActionTypes.CHANGE_MODE:\n      return changeMode(state, action.data);\n    case actions.EReduxActionTypes.SET_REGIONS:\n      return setRegions(state, action.data);\n    case actions.EReduxActionTypes.ADD_REGION:\n      return addRegion(state, action.data);\n    case actions.EReduxActionTypes.REMOVE_REGION:\n      return removeRegion(state, action.data);\n    case actions.EReduxActionTypes.SHIFT_REGION:\n      return shiftRegion(state, action.data.index, action.data.by);\n    default:\n      return state;\n  }\n}\n\nfunction toggleScale(state: AppState): AppState {\n  return persistedState({\n    ...state,\n    scale: state.scale === EScale.Linear ? EScale.Log : EScale.Linear\n  });\n}\n\nfunction changeZoom(state: AppState, data: number): AppState {\n  let zoom = state.zoom + data;\n  if (zoom > 5) {\n    zoom = 5;\n  } else if (zoom < 1) {\n    zoom = 1;\n  }\n  return persistedState({ ...state, zoom });\n}\n\nfunction changeMode(state: AppState, to: string): AppState {\n  return persistedState({ ...state, mode: to as mode.EMode });\n}\n\nfunction setRegions(state: AppState, regions: IRegion[]): AppState {\n  return persistedState({ ...state, regions });\n}\n\nfunction addRegion(state: AppState, name: string): AppState {\n  let regions = [...state.regions];\n  regions.push({ country: name, offset: -30 });\n  return persistedState({ ...state, regions });\n}\n\nfunction removeRegion(state: AppState, index: number): AppState {\n  let regions = [...state.regions];\n  regions.splice(index, 1);\n  return persistedState({ ...state, regions });\n}\n\nfunction shiftRegion(state: AppState, index: number, by: number): AppState {\n  let regions = [...state.regions];\n  regions[index] = { ...regions[index], offset: regions[index].offset + by };\n  return persistedState({ ...state, regions });\n}\n\nfunction persistedState(state: AppState): AppState {\n  let query = {\n    s: state.scale,\n    z: state.zoom,\n    m: state.mode,\n    r: state.regions.map(r => region.toString(r))\n  };\n  window.history.replaceState(null, \"\", \"?\" + qs.stringify(query));\n  return state;\n}\n\nfunction loadState(): AppState {\n  const query = qs.parse(window.location.search);\n  let state = { ...defaultState };\n\n  if (Object.values(EScale).includes(query.s as EScale)) {\n    state.scale = query.s as EScale;\n  }\n  if (Object.values(mode.EMode).includes(query.m as mode.EMode)) {\n    state.mode = query.m as mode.EMode;\n  }\n  if (Array.isArray(query.r)) {\n    state.regions = query.r.map(r => region.fromString(r));\n  } else if (query.r) {\n    state.regions = [region.fromString(query.r)];\n  }\n\n  return state;\n}\n","export interface IRegion {\n  country: string;\n  offset: number;\n}\n\nexport function toString(region: IRegion): string {\n  return `${region.country},${region.offset}`;\n}\n\nexport function fromString(str: string): IRegion {\n  let region = { country: \"United States\", offset: 0 };\n\n  const parts = str.split(\",\");\n  if (parts.length === 0) {\n    return region;\n  }\n\n  const [country, _offset] = parts;\n  return {\n    country,\n    offset: parseInt(_offset) || 0\n  };\n}\n","import React from \"react\";\n\nexport class ChevronLeft extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"15 18 9 12 15 6\"/>\n      </svg>\n    );\n  }\n}\n\nexport class ChevronRight extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"9 18 15 12 9 6\"/>\n      </svg>\n    );\n  }\n}\n\nexport class ChevronsLeft extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"11 17 6 12 11 7\"/>\n        <polyline points=\"18 17 13 12 18 7\"/>\n      </svg>\n    );\n  }\n}\n\nexport class ChevronsRight extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"13 17 18 12 13 7\"/>\n        <polyline points=\"6 17 11 12 6 7\"/>\n      </svg>\n    );\n  }\n}\n\nexport class PlusSign extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"/>\n        <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/>\n      </svg>\n    );\n  }\n}\n\nexport class MinusSign extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/>\n      </svg>\n    );\n  }\n}\n\nexport class TrashSign extends React.PureComponent {\n  render(): JSX.Element {\n    return (\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"\n        strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"3 6 5 6 21 6\"/>\n        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/>\n        <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"/>\n        <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"/>\n      </svg>\n    );\n  }\n}\n","import React from \"react\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport { connect } from \"react-redux\";\nimport { AnyAction, bindActionCreators, Dispatch } from \"redux\";\n\nimport { changeMode, changeZoom, toggleScale } from \"./redux/actions\";\nimport * as mode from \"./redux/mode\";\nimport { AppState, EScale } from \"./redux/reducers\";\nimport { PlusSign, MinusSign } from \"./svg\";\n\nimport \"./chart-control.css\";\n\ntype TChartControlProps = ReturnType<typeof mapStateToProps> &\n  ReturnType<typeof mapDispatchToProps>;\n\nclass ChartControl extends React.PureComponent<TChartControlProps, {}> {\n  constructor(props: TChartControlProps) {\n    super(props);\n\n    this.changeMode = this.changeMode.bind(this);\n    this.zoomIn = this.zoomIn.bind(this);\n    this.zoomOut = this.zoomOut.bind(this);\n    this.toggleScale = this.toggleScale.bind(this);\n  }\n\n  changeMode(key: string) {\n    this.props.changeMode(key);\n  }\n\n  renderModePicker(): JSX.Element {\n    return (\n      <Dropdown id=\"mode-control\" onSelect={this.changeMode}>\n        <Dropdown.Toggle variant=\"light\" id=\"mode-dropdown\">\n          {mode.toString(this.props.mode)}\n        </Dropdown.Toggle>\n        <Dropdown.Menu>\n          {mode.all.map(m => (\n            <Dropdown.Item key={m} eventKey={m}>\n              {mode.toString(m)}\n            </Dropdown.Item>\n          ))}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n\n  zoomOut() {\n    this.props.changeZoom(-1);\n  }\n\n  zoomIn() {\n    this.props.changeZoom(1);\n  }\n\n  renderZoomControl(): JSX.Element {\n    return (\n      <div id=\"zoom-control\" className=\"btn-group\" aria-label=\"Zoom\">\n        <button\n          type=\"button\"\n          className=\"btn btn-sm btn-light\"\n          disabled={this.props.zoom === 1}\n          onClick={this.zoomOut}\n        >\n          <MinusSign />\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-sm btn-light\"\n          disabled={this.props.zoom === 5}\n          onClick={this.zoomIn}\n        >\n          <PlusSign />\n        </button>\n      </div>\n    );\n  }\n\n  toggleScale(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      if (e.target.dataset[\"key\"] !== this.props.scale) {\n        this.props.toggleScale();\n      }\n    }\n  }\n\n  renderScaleToggle(): JSX.Element {\n    const baseClass = \"btn btn-link btn-sm\";\n    return (\n      <div id=\"scale-toggle\" className=\"btn-group\" aria-label=\"Scale\">\n        {[EScale.Linear, EScale.Log].map(s => (\n          <button\n            key={s}\n            data-key={s}\n            type=\"button\"\n            className={baseClass + (this.props.scale === s ? \" selected\" : \"\")}\n            onClick={this.toggleScale}\n          >\n            {s}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  render(): JSX.Element {\n    return (\n      <div id=\"chart-control\" className=\"baseline-flex\">\n        {this.renderModePicker()}\n        <div className=\"baseline-flex\">\n          {this.renderScaleToggle()}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: AppState) => ({\n  zoom: state.zoom,\n  mode: state.mode,\n  scale: state.scale\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>\n  bindActionCreators({ changeMode, changeZoom, toggleScale }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChartControl);\n","import dayjs from \"dayjs\";\nimport { max } from \"d3-array\";\nimport React from \"react\";\nimport Measure, { BoundingRect } from \"react-measure\";\nimport { connect } from \"react-redux\";\nimport _ from \"lodash\";\nimport { format } from \"d3-format\";\n\nimport { AxisLeft } from \"@vx/axis\";\nimport { Grid } from \"@vx/grid\";\nimport { Bar, Line, LinePath } from \"@vx/shape\";\nimport { curveMonotoneX } from \"@vx/curve\";\nimport { scaleLinear, scaleLog } from \"@vx/scale\";\nimport { Tooltip, withTooltip } from \"@vx/tooltip\";\nimport { WithTooltipProvidedProps } from \"@vx/tooltip/lib/enhancers/withTooltip\";\nimport { localPoint } from \"@vx/event\";\n\nimport { EMode, ModeToAllCountryData } from \"./redux/mode\";\nimport { AppState, EScale } from \"./redux/reducers\";\nimport Population from \"./data/country-pop.json\";\n\nimport \"./vx.css\";\n\nconst range = (n: number): number[] => Array.from(Array(n).keys());\nconst logTicks = new Set([1, 10, 100, 1000, 10000, 100000]);\n\ninterface IVXDataPoint {\n  date: number;\n  value: number;\n}\n\ninterface IVXDataSeries {\n  name: string;\n  color: string;\n  offset: number;\n  points: IVXDataPoint[];\n}\n\nconst x = (d: IVXDataPoint) => d.date;\nconst y = (d: IVXDataPoint) => d.value;\n\ninterface IVXProps {}\n\nexport interface IVXMarginShape {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}\n\ninterface IVXProvidedProps {\n  margin?: IVXMarginShape;\n  events?: boolean;\n}\n\ninterface IVXTooltipData {\n  name: string;\n  color: string;\n  offset: number;\n  date: number;\n  value: number;\n  y: number;\n}\n\ntype TVXProps = IVXProps &\n  IVXProvidedProps &\n  ReturnType<typeof mapStateToProps>;\n\nconst DAYS_TO_SHOW = 17;\n\nconst VX = withTooltip<TVXProps, IVXTooltipData[]>(\n  ({\n    margin = { top: 0, right: 0, bottom: 0, left: 0 },\n    showTooltip,\n    hideTooltip,\n    tooltipData,\n    tooltipTop = 0,\n    tooltipLeft = 0,\n    mode,\n    scale,\n    regions\n  }: TVXProps & WithTooltipProvidedProps<IVXTooltipData[]>) => {\n    const [dims, setDims] = React.useState<BoundingRect>({\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      width: 100,\n      height: 100\n    });\n\n    const xMax = dims.width - margin.left - margin.right;\n    const yMax = dims.height - margin.top - margin.bottom;\n\n    const vxData: IVXDataSeries[] = [];\n    const allCountryData = ModeToAllCountryData[mode];\n\n    const calcCases = (cases: number, mode: EMode, country: string): number => {\n      if (mode.endsWith(\"pp\")) {\n        const population = Population[country];\n        if (isNaN(population)) {\n          return 0;\n        }\n        return (cases / population * 1000000);\n      }\n      return cases;\n    }\n\n    regions.forEach(({ country, offset }, idx) => {\n      const countryData = allCountryData.filter(\n        countryRow => countryRow.country === country\n      );\n\n      const dayToCases = _.fromPairs(\n        _.map(countryData, ({ cases, year }) => [\n          year, calcCases(cases, mode, country)\n        ])\n      );\n\n      const points = range(DAYS_TO_SHOW)\n        .map(idx => ({\n          date: idx,\n          value: dayToCases[idx - offset] || 0\n        }))\n        .filter(point => point.value !== null && point.value !== 0);\n\n      vxData.push({\n        name: country,\n        color: `var(--series-color-${vxData.length % 6})`,\n        offset,\n        points\n      });\n    });\n\n    const tooltipShifter = (data: IVXTooltipData[]): IVXTooltipData[] => {\n      if (data.length < 2) {\n        return data;\n      }\n\n      data = data.sort((a, b) => (a.y > b.y) ? 1 : -1);\n      const middle = Math.floor(data.length / 2);\n\n      if (data[middle].y - data[middle - 1].y < 50) {\n        data[middle].y = data[middle].y + 25;\n        data[middle - 1].y = data[middle - 1].y - 25;\n      }\n\n      for (let i = middle - 2; i >= 0; i--) {\n        if (data[i + 1].y - data[i].y < 50) {\n          data[i].y = data[i + 1].y - 50;\n        }\n      }\n\n      for (let i = middle + 1; i < data.length; i++) {\n        if (data[i].y - data[i - 1].y < 50) {\n          data[i].y = data[i - 1].y + 50;\n        }\n      }\n\n      return data;\n    }\n\n    const handleTooltip = (\n      event: React.TouchEvent<SVGRectElement> | React.MouseEvent<SVGRectElement>\n    ) => {\n      const xValue = localPoint(event)?.x || 0;\n      const index = Math.round(xScale.invert(xValue));\n\n      let tooltipData: IVXTooltipData[] = [];\n      for (let i = 0; i < vxData.length; i++) {\n        const currentData = vxData[i];\n        const { name, color, offset } = currentData;\n        const date = index;\n\n        const matchingPoint = currentData.points.find(\n          point => point.date === date\n        );\n        if (!matchingPoint) {\n          continue;\n        }\n\n        const value = matchingPoint.value;\n\n        tooltipData.push({\n          name,\n          color,\n          offset,\n          date: index,\n          value,\n          y: yScale(value)\n        });\n      }\n\n      showTooltip({\n        tooltipData: tooltipShifter(tooltipData),\n        tooltipLeft: xScale(index),\n        tooltipTop: 0\n      });\n    };\n\n    const xScale = scaleLinear({\n      range: [0, dims.width],\n      domain: [0, DAYS_TO_SHOW - 1]\n    });\n\n    let maxY = 0;\n    for (let i = 0; i < vxData.length; i++) {\n      maxY = Math.max(max(vxData[i].points, y) || 0, maxY);\n    }\n    let yScale = scaleLinear({\n      range: [dims.height, 0],\n      domain: [0, maxY],\n      nice: true\n    });\n    if (scale === EScale.Log) {\n      yScale = scaleLog({\n        range: [dims.height, 0],\n        domain: [1, maxY],\n        nice: true\n      });\n    }\n\n    const common = {\n      x: (d: IVXDataPoint) => xScale(x(d)),\n      y: (d: IVXDataPoint) => yScale(y(d)),\n      curve: curveMonotoneX\n    };\n\n    const logFormat = (n: number | { valueOf(): number; }, i: number) => {\n      let value = typeof n === \"number\" ? n : n.valueOf();\n      return logTicks.has(value) ? format(\".2s\")(n) : \"\";\n    };\n    const axisFormat = scale === EScale.Log ? logFormat : format(\".2s\");\n\n    const tooltipValue = (value: number): string => {\n      if (Number.isInteger(value)) {\n        return value.toFixed();\n      }\n      return value.toFixed(2);\n    }\n\n    return (\n      <Measure\n        bounds\n        onResize={r => {\n          r.bounds && setDims(r.bounds);\n        }}\n      >\n        {({ measureRef }) => (\n          <div ref={measureRef}>\n            <svg width={dims.width} height={300}>\n              <AxisLeft\n                top={margin.top}\n                left={0}\n                scale={yScale}\n                hideZero\n                numTicks={5}\n                tickFormat={axisFormat}\n                tickStroke=\"transparent\"\n                stroke=\"transparent\"\n                tickLabelProps={() => ({\n                  fill: \"var(--gray)\",\n                  textAnchor: \"end\",\n                  fontSize: 10,\n                  dx: \"0em\",\n                  dy: \"0.25em\"\n                })}\n                tickComponent={({ formattedValue, ...tickProps }) => (\n                  <text {...tickProps}>{formattedValue}</text>\n                )}\n              />\n              <Grid\n                top={margin.top}\n                left={margin.left}\n                xScale={xScale}\n                yScale={yScale}\n                stroke=\"var(--gray)\"\n                opacity={0.1}\n                width={xMax}\n                height={yMax}\n                numTicksRows={5}\n                numTicksColumns={10}\n              />\n              {vxData.map(d => (\n                <LinePath\n                  key={d.name}\n                  stroke={d.color}\n                  strokeWidth={3}\n                  {...common}\n                  data={d.points}\n                />\n              ))}\n              <Bar\n                x={0}\n                y={0}\n                width={dims.width}\n                height={300}\n                fill=\"transparent\"\n                onTouchStart={handleTooltip}\n                onTouchMove={handleTooltip}\n                onMouseEnter={handleTooltip}\n                onMouseMove={handleTooltip}\n                onMouseLeave={hideTooltip}\n              />\n              {tooltipData && (\n                <g>\n                  <Line\n                    from={{ x: tooltipLeft, y: 0 }}\n                    to={{ x: tooltipLeft, y: 10000 }}\n                    stroke=\"var(--gray)\"\n                    strokeWidth={1}\n                    style={{ pointerEvents: \"none\" }}\n                    strokeDasharray=\"2,2\"\n                  />\n                </g>\n              )}\n            </svg>\n            {tooltipData && (\n              <div>\n                {tooltipData.map(d => {\n                  let style = {\n                    color: d.color,\n                    backgroundColor: \"transparent\",\n                    boxShadow: \"none\"\n                  };\n                  if (d.date > 10) {\n                    style[\"transform\"] = \"translateX(-100%)\";\n                    style[\"textAlign\"] = \"right\";\n                  }\n                  return (\n                    <Tooltip\n                      key={d.name}\n                      top={d.y - 30}\n                      left={tooltipLeft}\n                      style={style}\n                    >\n                      <div className=\"tooltip-desc\">\n                        <b>{`${d.name}`}</b>\n                        <span>{`- ${dayjs(\"2020-01-21\")\n                          .add(d.date - d.offset, \"day\")\n                          .format(\"MMM D\")}`}</span>\n                      </div>\n                      <div className=\"tooltip-value\">\n                        {`${tooltipValue(d.value)}`}\n                      </div>\n                    </Tooltip>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n      </Measure>\n    );\n  }\n);\n\nconst mapStateToProps = (state: AppState) => ({\n  regions: state.regions,\n  zoom: state.zoom,\n  scale: state.scale,\n  mode: state.mode\n});\n\nexport default connect(mapStateToProps)(VX);\n","import algoliasearch from \"algoliasearch/lite\";\nimport * as svg from \"./svg\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { AnyAction, bindActionCreators, Dispatch } from \"redux\";\nimport { addRegion } from \"./redux/actions\";\nimport \"./AddCountry.css\";\n\nconst searchClient = algoliasearch(\n  \"ZOOMT5L4JY\",\n  \"43a938b4fe4feea7874320d044a19bc5\"\n);\nconst searchIndex = searchClient.initIndex(\"covid\");\n\nexport const _AddRegion = ({\n  onSuccess,\n  addRegion\n}: {\n  onSuccess: () => void;\n  addRegion: (region: string) => void;\n}) => {\n  const [q, setQ] = useState(\"\");\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n\n  const getSuggestions = async (q: string) => {\n    const { hits } = await searchIndex.search(q);\n    console.log(hits);\n    // @ts-ignore\n    const _suggestions = hits.map(hit => hit.name).slice(0, 5);\n\n    setSuggestions(_suggestions);\n  };\n\n  useEffect(() => {\n    getSuggestions(q);\n  }, [q]);\n\n  return (\n    <div id=\"region-input-row\" className=\"region-row\">\n      <div className=\"region-name-wrapper\">\n        <input\n          value={q}\n          onChange={e => setQ(e.target.value)}\n          className=\"form-control\"\n          style={{ maxWidth: 200 }}\n          type=\"text\"\n          autoFocus={true}\n          placeholder=\"Country or region\"\n        />\n\n        <button\n          className=\"btn btn-link\"\n          onClick={() => onSuccess()}\n          style={{ color: \"gray\" }}\n        >\n          <svg.TrashSign />\n        </button>\n      </div>\n      <div className=\"autocomplete\">\n        {suggestions.map(suggestion => (\n          <div\n            key={suggestion}\n            className={\"btn btn-link\"}\n            onClick={() => {\n              addRegion(suggestion);\n              onSuccess();\n            }}\n          >\n            {suggestion}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>\n  bindActionCreators({ addRegion }, dispatch);\n\nexport const AddRegion = connect(null, mapDispatchToProps)(_AddRegion);\n","import dayjs from \"dayjs\";\nimport dayOfYear from \"dayjs/plugin/dayOfYear\";\nimport React from \"react\";\nimport Measure, { BoundingRect } from \"react-measure\";\nimport { connect } from \"react-redux\";\nimport { AnyAction, bindActionCreators, Dispatch } from \"redux\";\n\nimport { addRegion, removeRegion, shiftRegion } from \"./redux/actions\";\nimport { AppState } from \"./redux/reducers\";\nimport * as region from \"./redux/region\";\nimport { AddRegion } from \"./AddCountry\";\nimport * as svg from \"./svg\";\n\nimport \"./x-axis.css\";\n\ndayjs.extend(dayOfYear);\n\ntype TXAxisProps = ReturnType<typeof mapStateToProps> &\n  ReturnType<typeof mapDispatchToProps>;\n\ninterface IXAxisState {\n  enteringRegion: boolean;\n  dims: BoundingRect;\n}\n\nclass XAxis extends React.PureComponent<TXAxisProps, IXAxisState> {\n  constructor(props: TXAxisProps) {\n    super(props);\n\n    this.state = {\n      enteringRegion: false,\n      dims: {\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n        width: 1000,\n        height: 1000\n      }\n    };\n    this.addRegion = this.addRegion.bind(this);\n    this.removeRegion = this.removeRegion.bind(this);\n    this.shiftRegionBack1 = this.shiftRegionBack1.bind(this);\n    this.shiftRegionBack5 = this.shiftRegionBack5.bind(this);\n    this.shiftRegionForward1 = this.shiftRegionForward1.bind(this);\n    this.shiftRegionForward5 = this.shiftRegionForward5.bind(this);\n    this.showNewRegionInput = this.showNewRegionInput.bind(this);\n    this.dismissNewRegionInput = this.dismissNewRegionInput.bind(this);\n  }\n\n  addRegion(e: React.KeyboardEvent<HTMLElement>) {\n    console.log(e);\n  }\n\n  removeRegion(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      this.props.removeRegion(parseInt(e.target.dataset[\"index\"]!));\n    }\n  }\n\n  shiftRegionBack1(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      this.props.shiftRegion(parseInt(e.target.dataset[\"index\"]!), -1);\n    }\n  }\n\n  shiftRegionBack5(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      this.props.shiftRegion(parseInt(e.target.dataset[\"index\"]!), -5);\n    }\n  }\n\n  shiftRegionForward1(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      this.props.shiftRegion(parseInt(e.target.dataset[\"index\"]!), 1);\n    }\n  }\n\n  shiftRegionForward5(e: React.MouseEvent<HTMLElement>) {\n    if (e.target instanceof HTMLElement) {\n      this.props.shiftRegion(parseInt(e.target.dataset[\"index\"]!), 5);\n    }\n  }\n\n  showNewRegionInput() {\n    this.setState({ enteringRegion: true });\n  }\n\n  dismissNewRegionInput() {\n    this.setState({ enteringRegion: false });\n  }\n\n  dayString(day: dayjs.Dayjs): string {\n    let modulo = 2;\n    if (this.state.dims.width < 500) {\n      modulo = 4;\n    } else if (this.state.dims.width < 700) {\n      modulo = 3;\n    }\n    const date = day.dayOfYear();\n    return date % modulo === 0 ? day.format(\"M/D\") : \"·\";\n  }\n\n  renderDays(offset: number, i: number): JSX.Element {\n    const zero = dayjs(\"2020-01-21\");\n    return (\n      <div className=\"region-days-wrapper\">\n        <div className=\"region-days-gradient\" />\n        <div\n          className=\"region-days baseline-flex\"\n          style={{\n            transform: `translateX(${(offset * 100) / 16}%`,\n            color: `var(--series-color-${i % 6})`,\n          }}\n        >\n          {[...Array(60).keys()].map(d => (\n            <div key={d} className=\"region-day\">\n              <div className=\"region-day-inner\">\n                {this.dayString(zero.add(d, \"day\"))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  renderOffset(offset: number): JSX.Element {\n    if (this.props.regions.length === 0) {\n      return <div/>;\n    }\n\n    const base = this.props.regions[0].offset;\n    const delta = offset - base;\n    if (delta === 0) {\n      return <div/>;\n    }\n\n    const cls = delta > 0 ? \"delta-ahead\": \"delta-behind\";\n    return (\n      <div className={cls + \" delta\"}>\n        {`${Math.abs(delta)}d ${delta > 0 ? \"ahead\" : \"behind\"}`}\n      </div>\n    );\n  }\n\n  renderRegion(r: region.IRegion, i: number): JSX.Element {\n    const buttonAttrs = { className: \"btn btn-link\", \"data-index\": i };\n    return (\n      <div className=\"region-row\" key={r.country}>\n        <div className=\"region-shifter region-shifter-left\">\n          <button {...buttonAttrs} onClick={this.shiftRegionBack5}>\n            <svg.ChevronsLeft />\n          </button>\n          <button {...buttonAttrs} onClick={this.shiftRegionBack1}>\n            <svg.ChevronLeft />\n          </button>\n        </div>\n        <div className=\"region-name-wrapper\">\n          <div className=\"region-name-wrapper-inner\">\n            <div className=\"region-icon\" style={{\n              backgroundColor: `var(--series-color-${i % 6})`\n            }}/>\n            <div className=\"region-name\">{r.country}</div>\n            <button {...buttonAttrs} onClick={this.removeRegion}>\n              <svg.TrashSign />\n            </button>\n          </div>\n          {this.renderOffset(r.offset)}\n        </div>\n        {this.renderDays(r.offset, i)}\n        <div className=\"region-shifter region-shifter-right\">\n          <button {...buttonAttrs} onClick={this.shiftRegionForward1}>\n            <svg.ChevronRight />\n          </button>\n          <button {...buttonAttrs} onClick={this.shiftRegionForward5}>\n            <svg.ChevronsRight />\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  renderAddRegion(): JSX.Element {\n    return (\n      <div id=\"add-region\" className=\"region-row\">\n        <button className=\"btn btn-primary\" onClick={this.showNewRegionInput}>\n          <svg.PlusSign />\n          <span>Add Country / Region</span>\n        </button>\n      </div>\n    );\n  }\n\n  render(): JSX.Element {\n    return (\n      <Measure\n        bounds\n        onResize={r => { r.bounds && this.setState({dims: r.bounds}); }}\n      >\n        {({ measureRef }) => (\n          <div id=\"x-axis\" ref={measureRef}>\n            <hr />\n            {this.props.regions.map((r, i) => this.renderRegion(r, i))}\n            {this.state.enteringRegion ? (\n              <AddRegion onSuccess={() => this.dismissNewRegionInput()} />\n            ) : (\n              this.renderAddRegion()\n            )}\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n\nconst mapStateToProps = (state: AppState) => ({\n  regions: state.regions\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>\n  bindActionCreators({ addRegion, removeRegion, shiftRegion }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(XAxis);\n","import React, { useEffect, useState } from \"react\";\n\nexport const TwitterButton = () => {\n  const [url, setUrl] = useState(window[\"location\"].href);\n\n  useEffect(() => {\n    setUrl(window[\"location\"].href);\n  }, [window[\"location\"].href]);\n\n  return (\n    <div>\n      <a\n        style={{ display: \"none\" }}\n        href=\"https://twitter.com/share?ref_src=twsrc%5Etfw\"\n        className=\" twitter-share-button\"\n        data-show-count=\"false\"\n      >\n        Tweet\n      </a>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport ChartControl from \"./chart-control\";\nimport VX from \"./vx\";\nimport XAxis from \"./x-axis\";\n\nimport \"./App.css\";\nimport { TwitterButton } from \"./TwitterButton\";\n\nfunction App() {\n  return (\n    <div id=\"app-wrapper\">\n      <div id=\"title-row\" className=\"row\">\n        <div className=\"col-12 mx-auto\">\n          <h1 id=\"page-title\">COVID Rules Everything Around Me</h1>\n          <h5 id=\"page-subtitle\">\n            Understand COVID growth rates between different countries.\n          </h5>\n          <div className=\"divider\">\n            <div id=\"title-separator\" />\n            <TwitterButton />\n          </div>\n        </div>\n      </div>\n      <ChartControl />\n      <div className=\"chart\">\n        <div className=\"vx-wrapper\">\n          <VX />\n        </div>\n        <XAxis />\n      </div>\n      <footer>\n        <p>\n          Made by <a href={\"https://twitter.com/danqing_liu\"}>@danqing_liu</a>{\" \"}\n          and <a href={\"https://twitter.com/victorpontis\"}>@victorpontis</a>{\" \"}\n          with data pulled from{\" \"}\n          <a href={\"https://ourworldindata.org/coronavirus\"}>\n            Our World In Data\n          </a>\n          .\n        </p>\n\n        <p>\n          Explore the code in{\" \"}\n          <a href={\"https://github.com/danqing/covid19/\"}>Github</a>. Credit to\n          Algolia for search.\n        </p>\n\n        <p>Last updated on March 18 3:00 ET.</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\n\nimport reducers from \"./redux/reducers\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <Provider store={createStore(reducers)}>\n    <App/>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}